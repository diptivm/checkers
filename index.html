<!DOCTYPE html>

<!--
  COLLABORATORS:
  
-->
<html>

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <title>Checkerboard</title>

    <!-- Load style sheets -->
    <link rel="stylesheet" type="text/css" href="mainLayout.css" />

    <!-- Load any supplemental Javascript libraries here -->
    <script type="text/javascript" src="external_js/jquery-1.9.0.min.js"></script>
    <script type="text/javascript" src="checker.js"></script>
    <script type="text/javascript" src="boardEvent.js"></script>
    <script type="text/javascript" src="board.js"></script>
    <script type="text/javascript" src="rules.js"></script>

    <script type="text/javascript">

//This script extracts parameters from the URL
//from jquery-howto.blogspot.com

$.extend({
    getUrlVars : function() {
        var vars = [], hash;
        var hashes = window.location.href.slice(
            window.location.href.indexOf('?') + 1).split('&');
        for ( var i = 0; i < hashes.length; i++) {
            hash = hashes[i].split('=');
            vars.push(hash[0]);
            vars[hash[0]] = hash[1];
        }
        return vars;
    },
    getUrlVar : function(name) {
        return $.getUrlVars()[name];
    }
});

var DEFAULT_BOARD_SIZE = 8;
var BOARD_SIZE = DEFAULT_BOARD_SIZE;

    //data model
    var board;
    var rules;
    var whoseTurn = "black";	

    var directionOf = function(color) {
      if (color == "black") {
        return -1;
    }
    return 1;
}

    // Fill in this function to toggle the display for whose turn
    // The color parameter should be either "black" or "red"
    var toggleTurn = function(color) {
	// Your code here
}



    // This allows the Javascript code inside this block to only run when the page
    // has finished loading in the browser.
    $(document).ready(function() {
        if ($.getUrlVar('size') && $.getUrlVar('size') >= 6) {
            BOARD_SIZE = $.getUrlVar('size');
            board = new Board($.getUrlVar('size'));
        } else {
            BOARD_SIZE = DEFAULT_BOARD_SIZE;
            board = new Board(DEFAULT_BOARD_SIZE);
        }


        rules = new Rules(board);


     	// Your code here

        board.addEventListener('add',function (e) {
    		// Your code here
    	},true);

        board.addEventListener('move',function (e) {
    		// Your code here
    	},true);

        board.addEventListener('remove', function(e) {
        	// Your code here
        }, true);

        board.addEventListener('promote',function (e) {
    		// Your code here
    	},true);

        
        $("#btnNewGame").click(function(evt) {
            board.prepareNewGame();
        });

        $("#btnAutoMove").click(function(evt) {
          var playerColor = whoseTurn;
          var playerDirection = directionOf(playerColor);
          var result = rules.makeRandomMove(playerColor, playerDirection);
          if (result != null) {
            toggleTurn();
        }
    });

        board.prepareNewGame();

    });
</script>


</head>

<body>

    <table id="mainTable">
        <tr>
            <td id="navigation">
              <table>
                 <tr><td>	 <!-- Your code here -->			</td></tr>
                 <tr><td><input id="btnNewGame" type="button" name="new" value="New Game"/></td></tr>
                 <tr><td><input id="btnAutoMove" type="button" name="new" value="Auto Move"/></td></tr>

             </table>
         </td>

         <td id="content">
           <canvas id = "checkerBoard" width = "400" height = "400"> This browser does not support the HTML5 canvas tag. </canvas> 
           <!-- Your code here -->

       </td>
   </tr>

</table>
<script>
$(document).ready( function() {
    console.log(BOARD_SIZE);
    var sqSize = 400/BOARD_SIZE;
    console.log(sqSize);

    var c = document.getElementById('checkerBoard');
    var ctx = c.getContext('2d');

    ctx.fillStyle = "#ffffff";
    for(var i = 0; i < BOARD_SIZE; i++) {
       for(var j = 0; j < BOARD_SIZE/2; j++) {
            ctx.fillRect(sqSize*(i%2) + 2*sqSize*j,sqSize*i,sqSize,sqSize);
        } 
    }
    
    
});



</script>
</body>

</html>
